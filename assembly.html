

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>üîß Assembly &#8212; Embedded Computer Systems I</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="_static/tabs.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'assembly';</script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="üíª C Programming" href="c_programming.html" />
    <link rel="prev" title="üìÜ Course Schedule" href="schedule.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/ece382.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/ece382.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    ECE382 Embedded Computer Systems I
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Info</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="syllabus.html">üö© Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedule.html">üìÜ Course Schedule</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">üîß Assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_programming.html">üíª C Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">üôã FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">üíé Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="NoPointer.html">üêç No Pointer in Python?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Assignments</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Assignments/homework1.html">‚úèÔ∏è HW 1 Setting up CCS and Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/homework2.html">‚úèÔ∏è HW 2 Assembly Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab2.html">üî¨ Lab 2 Assembly Basic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/homework3.html">‚úèÔ∏è HW 3 Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab3.html">üî¨ Lab 3 Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/homework4.html">‚úèÔ∏è HW 4 Subroutines</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab4.html">üî¨ Lab 4 Subroutines</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab5.html">üî¨ Lab 5 Software Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab8.html">üî¨ Lab 8 I/O Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab10.html">üî¨ Lab 10 Multithreading</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab11.html">üî¨ Lab 11 Serial Ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab12.html">üî¨ Lab 12 Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab13.html">üî¨ Lab 13 Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab14.html">üî¨ Lab 14 Real-Time Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab15.html">üî¨ Lab 15 ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab15_calibration.html">üìà Lab15 Sensor Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab16.html">üî¨ Lab 16 Tachometer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/lab17.html">üî¨ Lab 17 Control Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Assignments/project.html">üöÄ Final Project</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/USAFA-ECE/ece382" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/USAFA-ECE/ece382/issues/new?title=Issue%20on%20page%20%2Fassembly.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/assembly.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>üîß Assembly</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assembly-questions">Assembly Questions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-i-need-to-preserve-r2-before-calling-my-function-if-it-only-uses-r0-and-r1">Why do I need to preserve R2 before calling my function if it only uses R0 and R1?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-does-add-not-update-program-status-register-psr">Why does ADD not update Program Status Register (PSR)?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-r0-and-r1-be-saved-in-the-stack-push-pop-i-thought-it-was-only-r4-r11-that-would-be-able-to-be-stored-in-a-stack">Can R0 and R1 be saved in the Stack (Push/Pop)? I thought it was only R4-R11 that would be able to be stored in a stack.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arm-instruction-reference">ARM Instruction Reference</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-and-sub-32-bit-addition-and-subtraction">ADD and SUB: 32-bit addition and subtraction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mul-and-udiv">MUL and UDIV</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#and-orr-eor-and-bic-32-bit-bitwise-and-or-exclusive-or-and-bit-clear">AND, ORR, EOR, and BIC: 32-bit bitwise AND, OR, Exclusive OR, and Bit Clear</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mov-32-bit-move">MOV: 32-bit Move</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ldr-load-from-memory-into-a-register">LDR: Load from memory into a register</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#str-store-from-register-into-memory">STR: Store from register into memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#asr-lsl-and-lsr-arithmetic-shift-right-logical-shift-left-and-logical-shift-right">ASR, LSL, and LSR: arithmetic shift right, logical shift left, and logical shift right</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmp-32-bit-compare">CMP: 32-bit compare</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-branch-instructions">B: Branch instructions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bl-branch-link-call-subroutine">BL: Branch link (call subroutine)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bx-branch-indirect">BX: Branch indirect</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#push-and-pop">PUSH and POP</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="assembly">
<h1>üîß Assembly<a class="headerlink" href="#assembly" title="Permalink to this heading">#</a></h1>
<section id="assembly-questions">
<span id="faq-assembly"></span><h2>Assembly Questions<a class="headerlink" href="#assembly-questions" title="Permalink to this heading">#</a></h2>
<section id="why-do-i-need-to-preserve-r2-before-calling-my-function-if-it-only-uses-r0-and-r1">
<h3>Why do I need to preserve R2 before calling my function if it only uses R0 and R1?<a class="headerlink" href="#why-do-i-need-to-preserve-r2-before-calling-my-function-if-it-only-uses-r0-and-r1" title="Permalink to this heading">#</a></h3>
<p>According to AAPCS, a subroutine can freely modify R0-R3 &amp; R12.  You claim that ‚Äúmy‚Äù function only uses R0 and R1.  First, when you develop software/hardware, there is no such thing as ‚Äúmy‚Äù product.  It does not belong to you.  All the code you develop belongs to your team, not you.  I have never seen an engineer/programmer works on their own like Tony Stark. Engineers/programmers work in a team of ~10 ‚Äì 1000, and anyone in the team can modify your code.  So, you MUST comply with standards.  Second, you may want to claim that my approach is more efficient.  It is not a matter of efficiency.  You must stop at a stop sign whether a car is coming or not.  The same applies to many other standards, such as safety standards.  So, always remember that R0-R3 &amp; R12 can hold different values after calling subroutines.</p>
</section>
<section id="why-does-add-not-update-program-status-register-psr">
<h3>Why does ADD not update Program Status Register (PSR)?<a class="headerlink" href="#why-does-add-not-update-program-status-register-psr" title="Permalink to this heading">#</a></h3>
<p>The textbook (pp. 64) says, ‚ÄúThe N, Z, V, C, and Q bits give information about the result of a previous ALU operation.‚Äù</p>
<p>Although ADD and SUB are ALU operations, they do not update the PSR register. If you want to update them, you must use ADDS and SUBS instead.  CMP always updates the PSR flags.</p>
<p>With SUBS you can replace</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">SUB</span><span class="w"> </span><span class="no">R0</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">   </span><span class="c1">; R0 = R0 - 1</span>
<span class="w">    </span><span class="nf">CMP</span><span class="w"> </span><span class="no">R0</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="w">   </span><span class="c1">; R0 == 0 ?</span>
<span class="w">    </span><span class="nf">BEQ</span><span class="w">  </span><span class="no">Label1</span><span class="w">  </span><span class="c1">; go to Label1 if R0 == 0</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">SUBS</span><span class="w"> </span><span class="no">R0</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">   </span><span class="c1">; R0 = R0 - 1</span>
<span class="w">    </span><span class="nf">BEQ</span><span class="w">  </span><span class="no">Label1</span><span class="w">   </span><span class="c1">; go to Label1 if R0 == 0, EQ tests Z == 1</span>
</pre></div>
</div>
</section>
<section id="can-r0-and-r1-be-saved-in-the-stack-push-pop-i-thought-it-was-only-r4-r11-that-would-be-able-to-be-stored-in-a-stack">
<h3>Can R0 and R1 be saved in the Stack (Push/Pop)? I thought it was only R4-R11 that would be able to be stored in a stack.<a class="headerlink" href="#can-r0-and-r1-be-saved-in-the-stack-push-pop-i-thought-it-was-only-r4-r11-that-would-be-able-to-be-stored-in-a-stack" title="Permalink to this heading">#</a></h3>
<p>Yes, they <em>can</em> be stored in the stack, whereas R4-R11 <em>must</em> be because you have to restore them if you change them in your function. You can store R0-R3, R12 in the stack to preserve them before calling a function in case the function contaminates them.  However, you don‚Äôt want to do that because it takes time.  Memory access is generally ~100-1000 times slower than register access. So, you had better store R0-R3 to R4-R11 instead.</p>
<p>You may insist you would not want to push R4-R11 if you are using them for R0-R3, which still causes memory to be used. You are right, but if you have used R4-R11 for something else, you have already pushed them. Otherwise, there is no reason to push R0-R3 because a function can freely modify R0-R3.</p>
</section>
</section>
<section id="arm-instruction-reference">
<span id="assembly-opcode"></span><h2>ARM Instruction Reference<a class="headerlink" href="#arm-instruction-reference" title="Permalink to this heading">#</a></h2>
<section id="add-and-sub-32-bit-addition-and-subtraction">
<h3>ADD and SUB: 32-bit addition and subtraction<a class="headerlink" href="#add-and-sub-32-bit-addition-and-subtraction" title="Permalink to this heading">#</a></h3>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">ADD</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">     </span><span class="c1">; R3 = R2 + R1</span>
<span class="w">    </span><span class="nf">ADD</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="w">         </span><span class="c1">; R3 = R3 + R2 (R3 += R2)</span>
<span class="w">    </span><span class="nf">ADD</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#100</span><span class="w">   </span><span class="c1">; R3 = R2 + 100 (#100 is a 12-bit immediate value between 0 - 4095)</span>
<span class="w">    </span><span class="nf">ADD</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">         </span><span class="c1">; R3 = R3 + 1 (R3++)</span>
<span class="w">    </span><span class="nf">SUB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">     </span><span class="c1">; R3 = R2 - R1</span>
<span class="w">    </span><span class="nf">SUB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="w">         </span><span class="c1">; R3 = R3 - R2 (R3 -= R2)</span>
<span class="w">    </span><span class="nf">SUB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#100</span><span class="w">   </span><span class="c1">; R3 = R2 - 100 (#100 is a 12-bit immediate value between 0 - 4095)</span>
<span class="w">    </span><span class="nf">SUB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#1</span><span class="w">         </span><span class="c1">; R3 = R3 - 1 (R3--)</span>
</pre></div>
</div>
</section>
<section id="mul-and-udiv">
<h3>MUL and UDIV<a class="headerlink" href="#mul-and-udiv" title="Permalink to this heading">#</a></h3>
</section>
<section id="and-orr-eor-and-bic-32-bit-bitwise-and-or-exclusive-or-and-bit-clear">
<h3>AND, ORR, EOR, and BIC: 32-bit bitwise AND, OR, Exclusive OR, and Bit Clear<a class="headerlink" href="#and-orr-eor-and-bic-32-bit-bitwise-and-or-exclusive-or-and-bit-clear" title="Permalink to this heading">#</a></h3>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">AND</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">      </span><span class="c1">; R3 = R2 &amp; R1 </span>
<span class="w">    </span><span class="nf">AND</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xFF00</span><span class="w"> </span><span class="c1">; R3 = R2 &amp; 0x0000FF00</span>
<span class="w">    </span><span class="nf">ORR</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">      </span><span class="c1">; R3 = R2 | R1</span>
<span class="w">    </span><span class="nf">EOR</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">      </span><span class="c1">; R3 = R2 ^ R1  (exclusive or)</span>
<span class="w">    </span><span class="nf">BIC</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xFF00</span><span class="w"> </span><span class="c1">; R3 = R2 &amp; 0xFFFF00FF</span>
<span class="w">    </span><span class="nf">BIC</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">      </span><span class="c1">; R3 = R2 &amp; ~R1 </span>
</pre></div>
</div>
</section>
<section id="mov-32-bit-move">
<h3>MOV: 32-bit Move<a class="headerlink" href="#mov-32-bit-move" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">MOV</span></code> instruction copies values into registers. This instruction is useful for moving values from one register to another, and initializing registers to a constant value.</p>
<p>Note: you cannot use <code class="docutils literal notranslate"><span class="pre">MOV</span></code> to move data from/to memory.  You must use <code class="docutils literal notranslate"><span class="pre">LDR</span></code> or <code class="docutils literal notranslate"><span class="pre">STR</span></code></p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">MOV</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="w">         </span><span class="c1">; R3 = R2 </span>
<span class="w">    </span><span class="nf">MOV</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xFA05</span><span class="w">    </span><span class="c1">; R3 = 0x0000FA05</span>
<span class="w">    </span><span class="nf">MOV</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#10</span><span class="w">        </span><span class="c1">; R3 = 10</span>
</pre></div>
</div>
<p>Incorrect Uses:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">MOV</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">]</span><span class="w">          </span><span class="c1">; Can&#39;t move from the address in R2.  Must use LDR instead.</span>
<span class="w">    </span><span class="nf">MOV</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xFF00FF00</span><span class="w">   </span><span class="c1">; 0xFF00FF00 is a 32-bit.  The range is 0-65535 (2^16-1)</span>
</pre></div>
</div>
</section>
<section id="ldr-load-from-memory-into-a-register">
<h3>LDR: Load from memory into a register<a class="headerlink" href="#ldr-load-from-memory-into-a-register" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">LDR</span></code> instructions copy values from memory into registers.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">]</span><span class="w">      </span><span class="c1">; Load 32-bit from address in R2 to R8 </span>
<span class="w">    </span><span class="nf">LDRB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">]</span><span class="w">      </span><span class="c1">; Load 8-bit from address in R2 to R8 </span>
<span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="p">]</span><span class="w">  </span><span class="c1">; Load 32-bit from address in R2 + R1 to R8 </span>
<span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#5</span><span class="p">]</span><span class="w">  </span><span class="c1">; Load 32-bit from address in R2 + 5 to R8 </span>
<span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">],</span><span class="w"> </span><span class="mi">#5</span><span class="w">  </span><span class="c1">; Load 32-bit from address in R2 to R8, then R2 = R2 + 5</span>
<span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#5</span><span class="p">]!</span><span class="w"> </span><span class="c1">; R2 = R2 + 5, then load 32-bit from address in R2 to R8</span>
<span class="w">    </span><span class="nf">LDR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">Pi</span><span class="w">        </span><span class="c1">; R3 = 314159</span>

<span class="nf">Pi</span><span class="w">  </span><span class="no">.word</span><span class="w"> </span><span class="mi">314159</span><span class="w">       </span><span class="c1">; Pi is the address of the constant 314159.</span>
</pre></div>
</div>
<p>Incorrect Uses:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">LDR</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="w">        </span><span class="c1">; R2 must be [R2] if the value of R2 is an address. Otherwise, it must use MOV R3, R2</span>
<span class="w">    </span><span class="nf">LDR</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#0</span><span class="no">xFF00</span><span class="w">   </span><span class="c1">; 0xFF00 is not an address</span>
</pre></div>
</div>
</section>
<section id="str-store-from-register-into-memory">
<h3>STR: Store from register into memory<a class="headerlink" href="#str-store-from-register-into-memory" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">STR</span></code> instructions copy values from registers to memory.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">STR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">]</span><span class="w">      </span><span class="c1">; Store 32-bit value of R3 into address R2 </span>
<span class="w">    </span><span class="nf">STRB</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">]</span><span class="w">      </span><span class="c1">; Store 8-bit value of R3 into address R2 </span>
<span class="w">    </span><span class="nf">STR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="p">]</span><span class="w">  </span><span class="c1">; Store 32-bit value of R3 into address R2 + R1     </span>
<span class="w">    </span><span class="nf">STR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#5</span><span class="p">]</span><span class="w">  </span><span class="c1">; Store 32-bit value of R3 into address R2 + 5 </span>
<span class="w">    </span><span class="nf">STR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">],</span><span class="w"> </span><span class="mi">#5</span><span class="w">  </span><span class="c1">; Store 32-bit value of R3 into address R2, then R2 = R2 + 5 </span>
<span class="w">    </span><span class="nf">STR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#5</span><span class="p">]!</span><span class="w"> </span><span class="c1">; R2 = R2 + 5, then store 32-bit value of R3 into address R2</span>
</pre></div>
</div>
</section>
<section id="asr-lsl-and-lsr-arithmetic-shift-right-logical-shift-left-and-logical-shift-right">
<h3>ASR, LSL, and LSR: arithmetic shift right, logical shift left, and logical shift right<a class="headerlink" href="#asr-lsl-and-lsr-arithmetic-shift-right-logical-shift-left-and-logical-shift-right" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ASR</span></code>, <code class="docutils literal notranslate"><span class="pre">LSL</span></code>, and <code class="docutils literal notranslate"><span class="pre">LSR</span></code> move the bits in the register to the left or right by the number of places specified by constant.
Note that arithmetic left shift is identical to logical left shift.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">ASR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#3</span><span class="w">    </span><span class="c1">; R3 = R2 &gt;&gt; 3, signed, similar to R3 = R2/8 </span>
<span class="w">    </span><span class="nf">ASR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">    </span><span class="c1">; R3 = R2 &gt;&gt; R1, signed, similar to R3 = R2/(2^R1) </span>
<span class="w">    </span><span class="nf">LSL</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#3</span><span class="w">    </span><span class="c1">; R3 = R2 &lt;&lt; 3, similar to R3 = R2*8 </span>
<span class="w">    </span><span class="nf">LSL</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">    </span><span class="c1">; R3 = R2 &lt;&lt; R1, similar to R3 = R2*(2^R1) </span>
<span class="w">    </span><span class="nf">LSR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="mi">#3</span><span class="w">    </span><span class="c1">; R3 = R2 &gt;&gt; 3, similar to R3 = R2/8 </span>
<span class="w">    </span><span class="nf">LSR</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="w">    </span><span class="c1">; R3 = R2 &gt;&gt; R1, similar to R3 = R2/(2^R1) </span>
</pre></div>
</div>
</section>
<section id="cmp-32-bit-compare">
<h3>CMP: 32-bit compare<a class="headerlink" href="#cmp-32-bit-compare" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">CMP</span></code> instruction compares two values. This instruction updates the N, Z, C, and V flags according to the difference between the two values.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">CMP</span><span class="w">  </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="mi">#6400</span><span class="w"> </span><span class="c1">; Compare R2 with #6400. Updates the N, Z, C, and V flags according to R3 - 6400</span>
<span class="w">    </span><span class="nf">CMP</span><span class="w">  </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">R3</span><span class="w">    </span><span class="c1">; Compare R2 with R3. Updates the N, Z, C, and V flags according to R3 - R2</span>
</pre></div>
</div>
</section>
<section id="b-branch-instructions">
<h3>B: Branch instructions<a class="headerlink" href="#b-branch-instructions" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">B</span></code> instructions cause a branch to <strong>label</strong>.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">B</span><span class="w">    </span><span class="no">label</span><span class="w">    </span><span class="c1">; branch to label </span>
<span class="w">    </span><span class="nf">BEQ</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if equal ==</span>
<span class="w">    </span><span class="nf">BNE</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if not equal !=</span>
<span class="w">    </span><span class="nf">BLE</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if less than or equal, signed &lt;=</span>
<span class="w">    </span><span class="nf">BLT</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if less than, signed &lt;</span>
<span class="w">    </span><span class="nf">BGE</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if greater than or equal, signed &gt;= </span>
<span class="w">    </span><span class="nf">BGT</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if greater than, signed &gt; </span>
<span class="w">    </span><span class="nf">BLS</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if lower or same, unsigned &lt;=</span>
<span class="w">    </span><span class="nf">BLO</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if lower, unsigned &lt;</span>
<span class="w">    </span><span class="nf">BHS</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if higher or same, unsigned &gt;= </span>
<span class="w">    </span><span class="nf">BHI</span><span class="w">  </span><span class="no">label</span><span class="w">    </span><span class="c1">; conditional branch to label if higher, unsigned &gt; </span>
</pre></div>
</div>
</section>
<section id="bl-branch-link-call-subroutine">
<h3>BL: Branch link (call subroutine)<a class="headerlink" href="#bl-branch-link-call-subroutine" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">BL</span></code> is the call to subroutine (function) instruction. The address of the subroutine is specified by the <strong>label</strong>. The <code class="docutils literal notranslate"><span class="pre">BL</span></code> instruction also saves the return address (the address of the next instruction) in the Link Register (LR).</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">BL</span><span class="w">  </span><span class="no">Func</span><span class="w">    </span><span class="c1">; Call to Func, save the return address in LR. </span>
</pre></div>
</div>
<p>If you use <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">Func</span></code>, it will call Func, but it will not return to the next instruction because the <code class="docutils literal notranslate"><span class="pre">B</span></code> instruction does not save the return address in LR.</p>
</section>
<section id="bx-branch-indirect">
<h3>BX: Branch indirect<a class="headerlink" href="#bx-branch-indirect" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">BX</span></code> is a branch indirect instruction, with the branch address indicated in <strong>Rm</strong>.</p>
<p>Examples:</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">BX</span><span class="w">  </span><span class="no">LR</span><span class="w">    </span><span class="c1">; jump to the place specified by LR. return at the end of function call</span>
<span class="w">    </span><span class="nf">BX</span><span class="w">  </span><span class="no">R0</span><span class="w">    </span><span class="c1">; jump to the place specified by R0. We don&#39;t use this in ECE382.</span>
</pre></div>
</div>
</section>
<section id="push-and-pop">
<h3>PUSH and POP<a class="headerlink" href="#push-and-pop" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PUSH</span></code> stores registers on the stack in order of decreasing register numbers, with the lowest-numbered register using the lowest memory address and the highest-numbered register using the highest memory address.
<code class="docutils literal notranslate"><span class="pre">POP</span></code> loads registers from the stack in order of increasing register numbers, with the lowest-numbered register using the lowest memory address and the highest-numbered register using the highest memory address.</p>
<p>Curly brackets are needed on the registers for push and pop i.e. <code class="docutils literal notranslate"><span class="pre">PUSH</span> <span class="pre">{LR}</span></code>. Here is how to push and pop multiple registers.</p>
<div class="highlight-ASM notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">PUSH</span><span class="w"> </span><span class="p">{</span><span class="no">R4-R6</span><span class="p">}</span>
<span class="w">    </span><span class="nf">PUSH</span><span class="w"> </span><span class="p">{</span><span class="no">R9</span><span class="p">}</span>
<span class="w">    </span><span class="nf">PUSH</span><span class="w"> </span><span class="p">{</span><span class="no">LR</span><span class="p">}</span>

<span class="w">    </span><span class="nf">POP</span><span class="w"> </span><span class="p">{</span><span class="no">LR</span><span class="p">}</span>
<span class="w">    </span><span class="nf">POP</span><span class="w"> </span><span class="p">{</span><span class="no">R9</span><span class="p">}</span>
<span class="w">    </span><span class="nf">POP</span><span class="w"> </span><span class="p">{</span><span class="no">R4-R6</span><span class="p">}</span>
</pre></div>
</div>
<p>The push and pop operations use a memory stack, accessed in an orderly manner called last-in-first-out (LIFO). So, the last thing you push must be popped first. However, the order does not matter when you push and pop multiple registers.</p>
<div class="highlight-ASM notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nf">PUSH</span><span class="w"> </span><span class="p">{</span><span class="no">R4</span><span class="p">,</span><span class="w"> </span><span class="no">R5</span><span class="p">,</span><span class="w"> </span><span class="no">R6</span><span class="p">,</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">LR</span><span class="p">}</span><span class="w"> </span>
<span class="w">    </span><span class="no">POP</span><span class="w"> </span><span class="p">{</span><span class="no">R4</span><span class="p">,</span><span class="w"> </span><span class="no">R5</span><span class="p">,</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">R6</span><span class="p">,</span><span class="w"> </span><span class="no">LR</span><span class="p">}</span><span class="w">  </span><span class="c1">;  order does not matter</span>
</pre></div>
</div>
<p>The order does not have to be the same for ARM 32-bit processors because they always go into the same relative positions, regardless of the order of appearance inside the curly brackets ({ }). The lowest-numbered register is stored and loaded first when you push and pop multiple registers in a single pop/push instruction.</p>
<p>Here is a even more elegant way to push and pop multiple registers.</p>
<div class="highlight-asm notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="c1">; even better way</span>
<span class="w">    </span><span class="nf">PUSH</span><span class="w"> </span><span class="p">{</span><span class="no">R4-R6</span><span class="p">,</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">LR</span><span class="p">}</span>
<span class="w">    </span><span class="nf">POP</span><span class="w"> </span><span class="p">{</span><span class="no">LR</span><span class="p">,</span><span class="w"> </span><span class="no">R4-R6</span><span class="p">,</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">LR</span><span class="p">}</span><span class="w">       </span><span class="c1">;  order does not matter</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="schedule.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">üìÜ Course Schedule</p>
      </div>
    </a>
    <a class="right-next"
       href="c_programming.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">üíª C Programming</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assembly-questions">Assembly Questions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-i-need-to-preserve-r2-before-calling-my-function-if-it-only-uses-r0-and-r1">Why do I need to preserve R2 before calling my function if it only uses R0 and R1?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-does-add-not-update-program-status-register-psr">Why does ADD not update Program Status Register (PSR)?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#can-r0-and-r1-be-saved-in-the-stack-push-pop-i-thought-it-was-only-r4-r11-that-would-be-able-to-be-stored-in-a-stack">Can R0 and R1 be saved in the Stack (Push/Pop)? I thought it was only R4-R11 that would be able to be stored in a stack.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arm-instruction-reference">ARM Instruction Reference</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-and-sub-32-bit-addition-and-subtraction">ADD and SUB: 32-bit addition and subtraction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mul-and-udiv">MUL and UDIV</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#and-orr-eor-and-bic-32-bit-bitwise-and-or-exclusive-or-and-bit-clear">AND, ORR, EOR, and BIC: 32-bit bitwise AND, OR, Exclusive OR, and Bit Clear</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mov-32-bit-move">MOV: 32-bit Move</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ldr-load-from-memory-into-a-register">LDR: Load from memory into a register</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#str-store-from-register-into-memory">STR: Store from register into memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#asr-lsl-and-lsr-arithmetic-shift-right-logical-shift-left-and-logical-shift-right">ASR, LSL, and LSR: arithmetic shift right, logical shift left, and logical shift right</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmp-32-bit-compare">CMP: 32-bit compare</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-branch-instructions">B: Branch instructions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bl-branch-link-call-subroutine">BL: Branch link (call subroutine)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bx-branch-indirect">BX: Branch indirect</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#push-and-pop">PUSH and POP</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Stan Baek
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      ¬© Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>